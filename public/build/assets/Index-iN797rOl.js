import{r as o,W as A,j as e}from"./app-BdDiG5MF.js";import{A as D,a as $,b as I,c as P,d as F}from"./AuthenticatedLayout-CBw7v3pZ.js";import{I as u}from"./InputError-PGD3Jzm_.js";import{T as K}from"./TextInput-BnM8wpwZ.js";import{T as R,a as L,b as V,c as U}from"./tabs-C4N2sP_9.js";import"./transition-Dkp8VegQ.js";import"./ThemeToggleButton-yQEJwIpi.js";function M({site_settings:b,auth:f,destinations:i}){const[j,N]=o.useState(i.length>0?i[0].name:""),[w,n]=o.useState(null),{data:d,setData:x,post:y,processing:c,errors:l,reset:m}=A({shipping_plan_id:null,port_id:null,destination_id:null,city_id:null,shipping_fee:""}),p=(t,a,s)=>`${t}_${a}_${s}`,v=(t,a,s)=>{const r=p(t.id,a.id,s.id);n(r),x({shipping_plan_id:s.shipping_plan_id,port_id:t.id,destination_id:a.id,city_id:s.id,shipping_fee:s.shipping_fee})},_=()=>{n(null),m()},k=t=>{if(t.preventDefault(),d.shipping_fee===""||isNaN(d.shipping_fee)||d.shipping_fee<0){alert("الرجاء ادخال قيمة صحيحة");return}y(route("shipping-prices.update"),{onSuccess:()=>{n(null),m()},onError:()=>{}})},[h,C]=o.useState({}),T=(t,a)=>{C(s=>({...s,[t]:a}))};return e.jsx(D,{user:f.user,site_settings:b,header:e.jsx("h2",{className:"text-xl font-semibold",children:"اسعار الشحن (Shipping Prices)"}),children:e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"px-2 mx-auto",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm dark:bg-gray-900 sm:rounded-lg",children:e.jsx("div",{className:"px-3 py-4 ",children:e.jsx("form",{onSubmit:k,children:e.jsxs(R,{value:j,onValueChange:N,className:"w-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -top-3 left-5 px-3 py-0.5 bg-indigo-500 text-white text-sm font-semibold rounded-full",children:"Destinations"}),e.jsx(L,{className:"inline-block gap-4 p-5 rounded-lg shadow-lg bg-gradient-to-r from-indigo-200 to-purple-300 dark:from-gray-800 dark:to-gray-700",children:i.map(t=>e.jsx(V,{className:"px-4 py-2 m-1 text-xs font-bold text-indigo-600 transition-all bg-white border border-indigo-300 rounded-lg md:text-xl dark:bg-gray-800 dark:text-white dark:border-gray-600 hover:bg-indigo-100 dark:hover:bg-indigo-900",value:t.name,children:t.name},t.id))})]}),i.map(t=>e.jsx(U,{value:t.name,children:e.jsxs($,{type:"multiple",defaultValue:t.ports.map(a=>`item-${a.id}`),className:"w-full mt-4 ",children:[e.jsx("div",{className:"my-2 text-left dark:text-white",children:e.jsxs("span",{className:"font-bold ",children:["Destination : ",t.name]})}),t.ports.map(a=>e.jsxs(I,{value:`item-${a.id}`,children:[e.jsxs(P,{className:"justify-end gap-2 bg-blue-100 rounded-sm dark:bg-indigo-600 dark:text-white",children:["Port : ",a.name]}),e.jsxs(F,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(K,{id:`filter-${a.id}`,type:"text",name:"city_name_filter",value:h[a.id]||"",placeholder:"بحث بالاسم",onChange:s=>T(a.id,s.target.value),className:"block w-64 mt-2"}),l.city_name_filter&&e.jsx(u,{message:l.city_name_filter,className:"mt-1"})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 rtl:text-right dark:text-gray-400",children:[e.jsx("thead",{className:"text-gray-700 uppercase border-b-2 border-gray-500 bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-xs w-fit text-nowrap md:text-base",children:"ID"}),e.jsx("th",{className:"p-3 text-xs text-nowrap md:text-base md:w-96",children:"Shipping Price USD"}),e.jsx("th",{className:"p-3 text-xs text-nowrap md:text-base md:w-32",children:"Code"}),e.jsx("th",{className:"p-3 text-xs text-left text-nowrap md:text-base min-w-28 md:w-96",children:"City"}),e.jsx("th",{className:"p-3 text-xs text-left text-nowrap md:text-base",children:"Actions"})]})}),e.jsx("tbody",{children:a.cities.filter(s=>{const r=h[a.id]||"";return s.name.toLowerCase().includes(r.toLowerCase())}).map((s,r)=>{const S=p(a.id,t.id,s.id),g=w===S;return e.jsxs("tr",{className:`${r%2===0?"bg-white":"bg-gray-100"} border-b dark:${r%2===0?"bg-gray-800":"bg-gray-700"} dark:border-gray-700`,children:[e.jsx("td",{className:"p-3 text-xs text-nowrap md:text-base",children:s.id}),e.jsx("td",{className:"p-3 text-xs text-nowrap md:text-base",children:g?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"number",step:"0.01",value:d.shipping_fee,onChange:E=>x("shipping_fee",E.target.value),className:"w-full p-1 border rounded"}),l.shipping_fee&&e.jsx(u,{message:l.shipping_fee,className:"mt-1"})]}):e.jsx("span",{children:Number(s.shipping_fee).toFixed(2)})}),e.jsx("td",{className:"p-3 text-xs text-nowrap md:text-base",children:s.code}),e.jsx("td",{className:"p-3 text-xs text-left text-nowrap md:text-base",children:s.name}),e.jsx("td",{className:"p-3 text-xs text-left text-nowrap md:text-base",children:g?e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"submit",disabled:c,className:"px-2 py-1 text-white bg-green-600 rounded hover:bg-green-700",children:c?"حفظ...":"حفظ"}),e.jsx("button",{type:"button",onClick:_,className:"px-2 py-1 text-white bg-gray-600 rounded hover:bg-gray-700",children:"الغاء"})]}):e.jsx("button",{type:"button",onClick:()=>v(a,t,s),className:"px-2 py-1 text-white bg-blue-600 rounded hover:bg-blue-700",children:"تعديل"})})]},s.id)})})]})})]})]},a.id))]})},t.id))]})})})})})})})}export{M as default};
