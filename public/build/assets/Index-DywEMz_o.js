import{r as c,W as E,j as e,Y as U,y as M}from"./app-BdDiG5MF.js";import{A as $}from"./AuthenticatedLayout-CBw7v3pZ.js";import{P as z}from"./Pagination-D79vMfMK.js";import{T as f}from"./TextInput-BnM8wpwZ.js";import{I as u}from"./InputLabel-076v0EPL.js";import{I as g}from"./InputError-PGD3Jzm_.js";import{B as A}from"./button-DTwe3eK1.js";import{P as K,a as L,C as G,b as V,c as W,d as Y,e as H,f as J,g as Q,h as X,i as Z}from"./popover-CZyhr6LC.js";import"./transition-Dkp8VegQ.js";import"./ThemeToggleButton-yQEJwIpi.js";import"./index-C2fsUSVT.js";function ce({auth:a,site_settings:m,models:d,makes:i,queryParams:r=null}){r=r||{};const[o,x]=c.useState(!1),[n,h]=c.useState(!1),[t,p]=c.useState(null),{data:D,setData:y,post:O,errors:v,reset:k}=E({name:"",make_id:""}),{data:w,setData:j,post:F,errors:C,reset:_}=E({name:"",make_id:"",_method:"PUT"}),b=()=>{x(!o),o||k()},N=(s=null)=>{s?(p(s),j({name:s.name,make_id:s.make_id,_method:"PUT"})):(p(null),_()),h(!n)},S=(s,l)=>{l?r[s]=l:delete r[s],delete r.page,M.get(route("model.index"),r)},P=(s,l)=>{l.key==="Enter"&&S(s,l.target.value)},T=s=>{window.confirm("هل انت متأكد من حذف الموديل ؟ ")&&M.delete(route("model.destroy",s.id),{onSuccess:l=>{}})},B=s=>{s.preventDefault(),O(route("model.store"),{onSuccess:()=>{k(),b()}})},R=s=>{s.preventDefault(),F(route("model.update",t.id),{onSuccess:()=>{_(),N()}})};return e.jsxs($,{user:a.user,site_settings:m,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight dark:text-gray-200",children:"موديلات السيارات (Models)"}),a.user.permissions.includes("create-model")&&e.jsx("button",{onClick:b,className:"px-3 py-2 text-sm text-white transition-all rounded shadow md:text-base text-nowrap bg-burntOrange ",children:"إضافة موديل"})]}),children:[e.jsx(U,{title:m.websiteName+" - موديلات السيارات (Models) "}),e.jsx("div",{className:"",children:e.jsx("div",{className:"mx-auto ",children:e.jsx("div",{className:"overflow-hidden overflow-y-auto bg-white shadow-sm dark:bg-gray-800 ",children:e.jsxs("div",{className:"p-3 text-gray-900 md:p-3 dark:text-gray-100",children:[e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 rtl:text-right dark:text-gray-400",children:[e.jsx("thead",{className:"text-gray-700 uppercase border-b-2 border-gray-500 bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{className:"text-nowrap",children:[e.jsx("th",{className:"p-3",children:"الرقم"}),e.jsx("th",{className:"p-3",children:"الاسم"}),e.jsx("th",{className:"p-3",children:"الماركة"}),e.jsx("th",{className:"p-3",children:"الإجراءات"})]})}),e.jsx("thead",{className:"text-xs text-gray-700 uppercase border-b-2 border-gray-500 bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{className:"text-nowrap",children:[e.jsx("th",{className:"p-3"}),e.jsx("th",{className:"p-3",children:e.jsx(f,{className:"w-full",defaultValue:r.name,placeholder:"الاسم",onBlur:s=>S("name",s.target.value),onKeyPress:s=>P("name",s)})}),e.jsx("th",{className:"p-3"}),e.jsx("th",{className:"p-3"})]})}),e.jsx("tbody",{children:d&&d.data.length>0?d.data.map((s,l)=>e.jsxs("tr",{className:`${l%2===0?"bg-white":"bg-gray-100"} border-b dark:${l%2===0?"bg-gray-800":"bg-gray-700"} dark:border-gray-700`,children:[e.jsx("td",{className:"px-3 py-2",children:s.id}),e.jsx("td",{className:"px-3 py-2 text-nowrap",children:s.name}),e.jsx("td",{className:"px-3 py-2 text-nowrap",children:s.make_name}),e.jsxs("td",{className:"px-3 py-2 text-nowrap",children:[a.user.permissions.includes("update-model")&&e.jsx("button",{onClick:()=>N(s),className:"mx-1 font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"تعديل"}),a.user.permissions.includes("delete-model")&&e.jsx("button",{onClick:()=>T(s),className:"mx-1 font-medium text-red-600 dark:text-red-500 hover:underline",children:"حذف"})]})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-3 py-2 text-center",children:"لا يوجد موديلات"})})})]})}),d&&e.jsx(z,{links:d.meta.links})]})})})}),o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"transition-all duration-300 ease-in-out transform scale-95 bg-white rounded-lg shadow-lg sm:w-1/2 dark:bg-gray-800 animate-in",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h2",{className:"text-lg font-semibold dark:text-white",children:"إضافة موديل"})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:B,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(u,{htmlFor:"model_name",value:"اسم الموديل"}),e.jsx(f,{id:"model_name",type:"text",name:"name",value:D.name,className:"block w-full mt-1",isFocused:!0,onChange:s=>y("name",s.target.value)}),e.jsx(g,{message:v.name,className:"mt-2"})]}),e.jsx("div",{className:"grid grid-cols-4 mb-4",children:e.jsxs("div",{children:[e.jsx(u,{htmlFor:"make_id",value:"الماركة"}),e.jsx(I,{items:i.data,onItemSelect:s=>y("make_id",s.id),placeholder:"اختر الماركة",emptyMessage:"لا توجد ماركات"}),e.jsx(g,{message:v.make_id,className:"mt-2"})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 text-white bg-gray-600 rounded hover:bg-gray-700",children:"إلغاء"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-white rounded bg-burntOrange ",children:"حفظ"})]})]})})]})}),n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"transition-all duration-300 ease-in-out transform scale-95 bg-white rounded-lg shadow-lg sm:w-1/2 dark:bg-gray-800 animate-in",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h2",{className:"text-lg font-semibold dark:text-white",children:"تعديل الموديل"})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(u,{htmlFor:"edit_model_name",value:"اسم الموديل"}),e.jsx(f,{id:"edit_model_name",type:"text",name:"name",value:w.name,className:"block w-full mt-1",isFocused:!0,onChange:s=>j("name",s.target.value)}),e.jsx(g,{message:C.name,className:"mt-2"})]}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"grid grid-cols-4 mb-4",children:e.jsxs("div",{children:[e.jsx(u,{htmlFor:"edit_make_id",value:"الماركة"}),e.jsx(I,{items:i.data,selectedMakeId:w.make_id,onItemSelect:s=>j("make_id",s.id)}),e.jsx(g,{message:C.make_id,className:"mt-2"})]})})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>N(),className:"px-4 py-2 text-white bg-gray-600 rounded hover:bg-gray-700",children:"إلغاء"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-white rounded bg-burntOrange ",children:"حفظ التغييرات"})]})]})})]})})]})}function I({items:a,onItemSelect:m,placeholder:d,selectedMakeId:i,emptyMessage:r}){const[o,x]=c.useState(!1),[n,h]=c.useState(null);return c.useEffect(()=>{if(i){const t=a.find(p=>String(p.id)===String(i));h(t||null)}},[i,a]),e.jsxs(K,{open:o,onOpenChange:x,children:[e.jsx(L,{asChild:!0,children:e.jsxs(A,{variant:"outline",role:"combobox","aria-expanded":o,className:"justify-between w-full",children:[n?n.name:d,e.jsx(G,{className:"w-4 h-4 ml-2 opacity-50 shrink-0"})]})}),e.jsx(V,{className:"w-full p-0",children:e.jsxs(W,{children:[e.jsx(Y,{placeholder:"ابحث عن ماركة..."}),e.jsx(H,{children:a&&a.length===0?e.jsx(J,{children:r}):e.jsx(Q,{children:a&&a.map(t=>e.jsxs(X,{value:t.name,onSelect:()=>{h(t),m(t),x(!1)},children:[e.jsx(Z,{className:`mr-2 h-4 w-4 ${(n==null?void 0:n.id)===t.id?"opacity-100":"opacity-0"}`}),t.name]},t.id))})})]})})]})}export{ce as default};
