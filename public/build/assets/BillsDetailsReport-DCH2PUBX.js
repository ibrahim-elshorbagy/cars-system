import{r as m,j as e,Y as w}from"./app-BdDiG5MF.js";import{A as k}from"./AuthenticatedLayout-CBw7v3pZ.js";import{T as h}from"./TextInput-BnM8wpwZ.js";import{I as b}from"./InputLabel-076v0EPL.js";import"./transition-Dkp8VegQ.js";import"./ThemeToggleButton-yQEJwIpi.js";function S({auth:l,site_settings:x,bills:p}){const[o,g]=m.useState(""),[c,j]=m.useState(""),d=t=>`$${parseFloat(t).toFixed(2)}`,i=t=>{const a=parseFloat(t.won_price.amount)+parseFloat(t.shipping_cost.amount),r=parseFloat(t.won_price.total_paid)+parseFloat(t.shipping_cost.total_paid);return(a-r).toFixed(2)},N=t=>t.reduce((a,r)=>a+parseFloat(i(r)),0).toFixed(2),y=t=>{const a=t.won_price.amount-t.won_price.total_paid+(t.shipping_cost.amount-t.shipping_cost.total_paid);return Math.abs(a)===0},n=(()=>{const t=o?new Date(o):null,a=c?new Date(c):null;return p.filter(r=>{const s=new Date(r.car_created_at);return t&&a?s>=t&&s<=a:t?s>=t:a?s<=a:!0})})();return e.jsxs(k,{user:l.user,site_settings:x,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-base font-semibold leading-tight md:text-xl dark:text-gray-200",children:"تقرير ذمم العميل"}),e.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md md:text-base hover:bg-blue-700",children:"طباعة كشف الحساب"})]}),children:[e.jsx(w,{title:x.websiteName+" - تقرير ذمم العميل"}),e.jsxs("div",{className:"p-4 bg-white print dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 mb-8 border-b-2 border-gray-500 dark:text-white",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:x.websiteName}),e.jsx("p",{className:"text-1xl ",children:x.phone}),e.jsx("p",{className:"text-1xl ",children:x.email})]}),e.jsx("div",{children:e.jsx("img",{src:x.websiteLogo,alt:"Website Logo",className:"h-24"})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("h3",{className:"mt-2 text-lg font-semibold dark:text-white",children:"التاريخ"}),e.jsxs("div",{children:[e.jsx(b,{className:"block mb-1 text-sm dark:text-white",children:"من تاريخ:"}),e.jsx(h,{type:"date",value:o,onChange:t=>g(t.target.value),className:"px-2 py-1 border rounded dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx(b,{className:"block mb-1 text-sm dark:text-white",children:"إلى تاريخ:"}),e.jsx(h,{type:"date",value:c,onChange:t=>j(t.target.value),className:"px-2 py-1 border rounded dark:bg-gray-700 dark:text-white"})]})]})}),e.jsxs("div",{className:"overflow-auto",children:[e.jsxs("div",{className:"my-4 mb-8",children:[e.jsxs("h1",{className:"text-base font-bold md:text-2xl dark:text-white",children:["العميل : ",l.user.name]}),e.jsxs("h1",{className:"text-base font-bold md:text-2xl dark:text-white",children:["الشركة : ",l.user.customer_company]}),e.jsxs("h1",{className:"text-sm md:text-lg dark:text-white",children:[e.jsx("span",{className:"font-bold",children:"التاريخ"}),":"," ",new Date().toLocaleString()]})]}),n.map((t,a)=>e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"mb-2 text-sm font-bold text-gray-800 dark:text-white",children:e.jsxs("div",{dir:"ltr",className:"flex flex-col gap-2 text-2xl font-bold text-right text-blue-900 dark:text-white",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"ml-2 text-sm text-nowrap md:text-lg",children:["تاريخ الشراء - ",t.car_created_at]}),y(t)?e.jsx("span",{className:"p-1 text-xs text-green-600 bg-green-100 rounded-full md:px-2 md:text-base",children:"مسددة"}):e.jsx("span",{className:""})]}),e.jsxs("div",{className:"text-sm text-nowrap md:text-2xl",children:[t.car_year," ",t.car_make," ",t.car_model," - Chassis :"," ",t.car_chassis]})]})}),e.jsxs("table",{className:"w-full mb-4 border-collapse print:border-none dark:text-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-100 dark:bg-blue-700",children:[e.jsx("th",{className:"p-2 text-xs text-right border text-nowrap dark:border-gray-600 md:text-base",children:"سعر الشراء"}),e.jsx("th",{className:"p-2 text-xs text-right border text-nowrap dark:border-gray-600 md:text-base",children:"مدفوع (سعر الشراء)"}),e.jsx("th",{className:"p-2 text-xs text-right border text-nowrap dark:border-gray-600 md:text-base",children:"سعر الشحن"}),e.jsx("th",{className:"p-2 text-xs text-right border text-nowrap dark:border-gray-600 md:text-base",children:"مدفوع (سعر الشحن)"}),e.jsx("th",{className:"p-2 text-xs text-right border text-nowrap dark:border-gray-600 md:text-base",children:"مجموع الذمم"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"bg-white dark:bg-gray-800 dark:text-white",children:[e.jsx("td",{className:"p-2 text-xs text-right border dark:border-gray-600 md:text-base",children:d(t.won_price.amount)}),e.jsx("td",{className:"p-2 text-xs text-right border dark:border-gray-600 md:text-base",children:d(t.won_price.total_paid)}),e.jsx("td",{className:"p-2 text-xs text-right border dark:border-gray-600 md:text-base",children:d(t.shipping_cost.amount)}),e.jsx("td",{className:"p-2 text-xs text-right border dark:border-gray-600 md:text-base",children:d(t.shipping_cost.total_paid)}),e.jsx("td",{className:"p-2 text-xs text-right border dark:border-gray-600 md:text-base",children:d(i(t))})]})})]}),e.jsx("h4",{className:"mb-1 text-xs font-semibold dark:text-white md:text-base",children:"تسديدات سعر الشراء"}),t.won_price.payments.length>0?e.jsxs("table",{className:"mb-4 text-xs border-collapse print:border-none dark:text-white md:text-base w-[70%]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200 dark:bg-gray-900",children:[e.jsx("th",{className:"p-2 text-xs text-right border text-nowrap dark:border-gray-600 md:text-base",children:"رقم الدفع"}),e.jsx("th",{className:"p-2 text-xs text-right border text-nowrap dark:border-gray-600 md:text-base",children:"القيمة المسددة"}),e.jsx("th",{className:"p-2 text-xs text-right border text-nowrap dark:border-gray-600 md:text-base",children:"تاريخ الدفع"})]})}),e.jsxs("tbody",{children:[t.won_price.payments.map((r,s)=>e.jsxs("tr",{className:`${s%2===0?"bg-white dark:bg-gray-800":"bg-gray-100 dark:bg-gray-700"}`,children:[e.jsx("td",{className:"p-2 text-xs text-right border dark:border-gray-600 md:text-base",children:r.payment_id}),e.jsx("td",{className:"p-2 text-xs text-right border dark:border-gray-600 md:text-base",children:d(r.won_price_amount)}),e.jsx("td",{className:"p-2 text-xs text-right border text-nowrap dark:border-gray-600 md:text-base",children:r.payment_date})]},s)),e.jsxs("tr",{children:[e.jsx("td",{colSpan:1,className:"p-2 text-xs text-right border dark:border-gray-600 md:text-base",children:"المجموع"}),e.jsxs("td",{colSpan:2,className:"p-2 text-xs text-right border dark:border-gray-600 md:text-base",children:["$",parseFloat(t.won_price.total_paid).toFixed(2)]})]})]})]}):e.jsx("p",{className:"mb-4 text-xs text-red-500 dark:text-white md:text-base",children:"لا يوجد تسديدات لسعر الشراء"}),e.jsx("h4",{className:"mb-1 text-xs font-semibold dark:text-white md:text-base",children:"تسديدات سعر الشحن"}),t.shipping_cost.payments.length>0?e.jsxs("table",{className:"mb-4 border-collapse print:border-none dark:text-white w-[70%]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200 dark:bg-gray-900",children:[e.jsx("th",{className:"p-2 text-xs text-right border text-nowrap dark:border-gray-600 md:text-base",children:"رقم الدفع"}),e.jsx("th",{className:"p-2 text-xs text-right border text-nowrap dark:border-gray-600 md:text-base",children:"القيمة المسددة"}),e.jsx("th",{className:"p-2 text-xs text-right border text-nowrap dark:border-gray-600 md:text-base",children:"تاريخ الدفع"})]})}),e.jsxs("tbody",{children:[t.shipping_cost.payments.map((r,s)=>e.jsxs("tr",{className:`${s%2===0?"bg-white dark:bg-gray-800":"bg-gray-100 dark:bg-gray-700"}`,children:[e.jsx("td",{className:"p-2 text-xs text-right border dark:border-gray-600 md:text-base",children:r.payment_id}),e.jsx("td",{className:"p-2 text-xs text-right border dark:border-gray-600 md:text-base",children:d(r.shipping_cost_amount)}),e.jsx("td",{className:"p-2 text-xs text-right border text-nowrap dark:border-gray-600 md:text-base",children:r.payment_date})]},s)),e.jsxs("tr",{children:[e.jsx("td",{colSpan:1,className:"p-2 text-xs text-right border dark:border-gray-600 md:text-base",children:"المجموع"}),e.jsxs("td",{colSpan:2,className:"p-2 text-xs text-right border dark:border-gray-600 md:text-base",children:["$",parseFloat(t.shipping_cost.total_paid).toFixed(2)]})]})]})]}):e.jsx("p",{className:"text-xs text-red-500 dark:text-white md:text-base",children:"لا يوجد تسديدات لسعر الشحن"})]},a)),n.length===0&&e.jsx("p",{className:"my-5 text-center text-red-500 dark:text-white",children:"لا توجد سيارات في نطاق التاريخ المحدد"})]}),e.jsx("div",{className:"px-6 py-3 text-left text-black bg-blue-100 rounded-lg",children:e.jsxs("h1",{className:"text-sm font-bold md:text-2xl",children:["اجمالي الذمم : ",N(n)," $"]})})]})]})}export{S as default};
