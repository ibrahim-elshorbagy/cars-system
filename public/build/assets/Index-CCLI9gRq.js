import{r as l,W as p,j as e,a as T,Y as z,y as g}from"./app-BdDiG5MF.js";import{P as A}from"./Pagination-D79vMfMK.js";import{T as o}from"./TextInput-BnM8wpwZ.js";import{A as K}from"./AuthenticatedLayout-CBw7v3pZ.js";import{I as b}from"./InputLabel-076v0EPL.js";import{I as j}from"./InputError-PGD3Jzm_.js";import"./transition-Dkp8VegQ.js";import"./ThemeToggleButton-yQEJwIpi.js";function J({auth:r,site_settings:x,boxes:n,queryParams:s=null}){s=s||{};const N=(t,a)=>{a?s[t]=a:delete s[t],g.get(route("box.index"),s)},y=(t,a)=>{a.key==="Enter"&&N(t,a.target.value)},[m,f]=l.useState(!1),[h,w]=l.useState(!1),[d,v]=l.useState(null),i=()=>{f(!m)},c=(t=null)=>{v(t),w(!h)},{data:k,setData:C,post:E,errors:D,reset:I}=p({name:""}),{data:S,setData:u,post:_,errors:O,reset:M}=p({name:"",_method:"PUT"}),B=t=>{t.preventDefault(),E(route("box.store"),{onSuccess:()=>{I(),i()}})},F=t=>{t.preventDefault(),_(route("box.update",d.id),{onSuccess:()=>{M(),c()}})};l.useEffect(()=>{d&&u("name",d.name)},[d]);const R=t=>{window.confirm("هل انت متاكد من حذف الصندوق ؟ ")&&g.delete(route("box.destroy",t),{onSuccess:a=>{}})};return e.jsxs(K,{user:r.user,site_settings:x,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight dark:text-gray-200",children:"الصناديق"}),e.jsxs("div",{className:"flex items-center gap-3",children:[r.user.permissions.includes("read-box-transaction")&&e.jsx(T,{href:route("box.index.transaction"),className:"px-3 py-1 text-white transition-all rounded shadow bg-emerald-500 ",children:"موجودات الصندوق"}),r.user.permissions.includes("create-box")&&e.jsx("button",{onClick:i,className:"px-3 py-1 text-white transition-all rounded shadow bg-burntOrange ",children:"اضافة جديد"})]})]}),children:[e.jsx(z,{title:x.websiteName+" - الصناديق"}),e.jsx("div",{className:"",children:e.jsx("div",{className:"mx-auto ",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm dark:bg-gray-800 ",children:e.jsxs("div",{className:"p-3 text-gray-900 md:p-3 dark:text-gray-100",children:[e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 rtl:text-right dark:text-gray-400",children:[e.jsx("thead",{className:"text-gray-700 uppercase border-b-2 border-gray-500 bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{className:"text-nowrap",children:[e.jsx("td",{children:"ID"}),e.jsx("td",{children:"الاسم"}),e.jsx("td",{children:"تاريخ الانشاء"}),e.jsx("td",{children:"تاريخ التحديث"}),e.jsx("td",{children:"الاجراءات"})]})}),e.jsx("thead",{className:"text-xs text-gray-700 uppercase border-b-2 border-gray-500 bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{className:"text-nowrap",children:[e.jsx("th",{className:"p-3"}),e.jsx("th",{className:"p-3",children:e.jsx(o,{className:"w-full",defaultValue:s.name,placeholder:"اسم الصندوق",onKeyPress:t=>y("name",t)})}),e.jsx("th",{className:"p-3"}),e.jsx("th",{className:"p-3"}),e.jsx("th",{className:"p-3"})]})}),e.jsx("tbody",{children:n&&n.data.length>0?n.data.map(t=>e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("td",{className:"px-3 py-2",children:t.id}),e.jsx("th",{className:"px-3 py-2 text-nowrap",children:t.name}),e.jsx("td",{className:"px-3 py-2 text-nowrap",children:t.created_at}),e.jsx("td",{className:"px-3 py-2 text-nowrap",children:t.updated_at}),e.jsxs("td",{className:"px-3 py-2 text-nowrap",children:[r.user.permissions.includes("update-box")&&e.jsx("button",{onClick:()=>c(t),className:"mx-1 font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"تعديل"}),r.user.permissions.includes("delete-box")&&e.jsx("button",{onClick:()=>R(t.id),className:"mx-1 font-medium text-red-600 dark:text-red-500 hover:underline",children:"حذف"})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-3 py-2 text-center",children:"لا يوجد صناديق"})})})]})}),n&&e.jsx(A,{links:n.meta.links})]})})})}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"transition-all duration-300 ease-in-out transform scale-95 bg-white rounded-lg shadow-lg sm:w-1/2 dark:bg-gray-800 animate-in",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h2",{className:"text-lg font-semibold text-black dark:text-white ",children:"إضافة صندوق جديد"})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:B,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(b,{htmlFor:"box_name",value:"اسم الصندوق"}),e.jsx(o,{id:"box_name",type:"text",name:"name",value:k.name,className:"block w-full mt-1",isFocused:!0,onChange:t=>C("name",t.target.value)}),e.jsx(j,{message:D.name,className:"mt-2"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 text-white bg-gray-600 rounded hover:bg-gray-700",children:"إلغاء"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-white rounded bg-burntOrange ",children:"حفظ"})]})]})})]})}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"transition-all duration-300 ease-in-out transform scale-95 bg-white rounded-lg shadow-lg sm:w-1/2 dark:bg-gray-800 animate-in",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h2",{className:"text-lg font-semibold",children:"تعديل الصندوق"})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(b,{htmlFor:"edit_box_name",value:"اسم الصندوق"}),e.jsx(o,{id:"edit_box_name",type:"text",name:"name",value:S.name,className:"block w-full mt-1",isFocused:!0,onChange:t=>u("name",t.target.value)}),e.jsx(j,{message:O.name,className:"mt-2"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>c(),className:"px-4 py-2 text-white bg-gray-600 rounded hover:bg-gray-700",children:"إلغاء"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-white rounded bg-burntOrange ",children:"حفظ التغييرات"})]})]})})]})})]})}export{J as default};
